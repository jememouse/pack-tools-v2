# åŒ…è£…å·¥å…·ç½‘ç«™ VPS éƒ¨ç½²æŒ‡å—

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å°†åŒ…è£…å·¥å…·ç½‘ç«™éƒ¨ç½²åˆ°æ‚¨çš„VPSæœåŠ¡å™¨ä¸Šã€‚

## ğŸ“‹ å‰ç½®è¦æ±‚

- Ubuntu 18.04+ æˆ– Debian 9+ VPSæœåŠ¡å™¨
- Rootæƒé™æˆ–sudoæƒé™
- æœåŠ¡å™¨å·²å¼€æ”¾80å’Œ443ç«¯å£
- (å¯é€‰) åŸŸåè§£æåˆ°æœåŠ¡å™¨IP

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### æ­¥éª¤1: è¿æ¥åˆ°VPS

```bash
ssh root@your-vps-ip
# æˆ–ä½¿ç”¨æ‚¨çš„ç”¨æˆ·å
ssh username@your-vps-ip
```

### æ­¥éª¤2: ä¸‹è½½éƒ¨ç½²è„šæœ¬

```bash
# å…‹éš†é¡¹ç›®åˆ°ä¸´æ—¶ç›®å½•
git clone https://github.com/jememouse/pack-tools-v2.git /tmp/pack-tools-web
cd /tmp/pack-tools-web
```

### æ­¥éª¤3: è®¾ç½®æœåŠ¡å™¨ç¯å¢ƒ

```bash
# è¿è¡Œç¯å¢ƒè®¾ç½®è„šæœ¬
sudo ./deploy-setup.sh
```

è¿™ä¸ªè„šæœ¬ä¼šå®‰è£…ï¼š
- âœ… Nginx webæœåŠ¡å™¨
- âœ… Node.js 18.x
- âœ… Gitç‰ˆæœ¬æ§åˆ¶
- âœ… PM2è¿›ç¨‹ç®¡ç†å™¨
- âœ… é…ç½®é˜²ç«å¢™è§„åˆ™

### æ­¥éª¤4: éƒ¨ç½²ç½‘ç«™

```bash
# è¿è¡Œè‡ªåŠ¨éƒ¨ç½²è„šæœ¬
sudo ./deploy.sh
```

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- ğŸ“¥ ä»GitHubå…‹éš†æœ€æ–°ä»£ç 
- ğŸ“¦ å®‰è£…é¡¹ç›®ä¾èµ–
- ğŸ”¨ æ„å»ºç”Ÿäº§ç‰ˆæœ¬
- ğŸ”§ é…ç½®Nginx
- ğŸ”’ è®¾ç½®æ–‡ä»¶æƒé™
- ğŸŒ å¯åŠ¨ç½‘ç«™æœåŠ¡

### æ­¥éª¤5: è®¿é—®ç½‘ç«™

éƒ¨ç½²å®Œæˆåï¼Œæ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®ç½‘ç«™ï¼š

```
http://your-server-ip
```

## ğŸ”’ é…ç½®SSLè¯ä¹¦ (å¯é€‰ä½†æ¨è)

å¦‚æœæ‚¨æœ‰åŸŸåï¼Œå¼ºçƒˆå»ºè®®é…ç½®SSLè¯ä¹¦ï¼š

```bash
# é¦–å…ˆåœ¨DNSä¸­å°†åŸŸåæŒ‡å‘æ‚¨çš„æœåŠ¡å™¨IP
# ç„¶åè¿è¡ŒSSLé…ç½®è„šæœ¬
sudo ./setup-ssl.sh your-domain.com
```

é…ç½®æˆåŠŸåï¼Œæ‚¨å¯ä»¥é€šè¿‡HTTPSè®¿é—®ï¼š
```
https://your-domain.com
```

## ğŸ”„ æ›´æ–°ç½‘ç«™

å½“æ‚¨å¯¹ç½‘ç«™è¿›è¡Œäº†æ›´æ”¹å¹¶æ¨é€åˆ°GitHubåï¼Œå¯ä»¥ä½¿ç”¨æ›´æ–°è„šæœ¬ï¼š

```bash
cd /var/www/pack-tools-web
sudo ./update.sh
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
/var/www/pack-tools-web/
â”œâ”€â”€ dist/                 # æ„å»ºåçš„é™æ€æ–‡ä»¶ (NginxæœåŠ¡ç›®å½•)
â”œâ”€â”€ src/                  # Vue.jsæºä»£ç 
â”œâ”€â”€ package.json          # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ vite.config.js        # Viteæ„å»ºé…ç½®
â””â”€â”€ ...

/etc/nginx/sites-available/pack-tools-web  # Nginxé…ç½®æ–‡ä»¶
/var/log/nginx/           # Nginxæ—¥å¿—æ–‡ä»¶
```

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
# æ£€æŸ¥NginxçŠ¶æ€
sudo systemctl status nginx

# æ£€æŸ¥Nginxé…ç½®æ˜¯å¦æ­£ç¡®
sudo nginx -t

# é‡æ–°åŠ è½½Nginxé…ç½®
sudo systemctl reload nginx
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# æŸ¥çœ‹è®¿é—®æ—¥å¿—
sudo tail -f /var/log/nginx/access.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo tail -f /var/log/nginx/error.log
```

### æ–‡ä»¶æƒé™
```bash
# å¦‚æœé‡åˆ°æƒé™é—®é¢˜
sudo chown -R www-data:www-data /var/www/pack-tools-web/dist
sudo chmod -R 755 /var/www/pack-tools-web/dist
```

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### ç»‘å®šåŸŸå

ç¼–è¾‘Nginxé…ç½®æ–‡ä»¶ï¼š
```bash
sudo nano /etc/nginx/sites-available/pack-tools-web
```

ä¿®æ”¹ `server_name` è¡Œï¼š
```nginx
server_name your-domain.com www.your-domain.com;
```

é‡æ–°åŠ è½½Nginxï¼š
```bash
sudo systemctl reload nginx
```

### ä¿®æ”¹ç«¯å£

å¦‚æœéœ€è¦ä½¿ç”¨å…¶ä»–ç«¯å£ï¼Œä¿®æ”¹Nginxé…ç½®ä¸­çš„ `listen` æŒ‡ä»¤ï¼š
```nginx
listen 8080;  # æ”¹ä¸ºæ‚¨éœ€è¦çš„ç«¯å£
```

## ğŸ” æ•…éšœæ’é™¤

### ç½‘ç«™æ— æ³•è®¿é—®
1. æ£€æŸ¥Nginxæ˜¯å¦è¿è¡Œï¼š`sudo systemctl status nginx`
2. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ï¼š`sudo ufw status`
3. æ£€æŸ¥ç«¯å£æ˜¯å¦å¼€æ”¾ï¼š`netstat -tlnp | grep :80`

### æ„å»ºå¤±è´¥
1. æ£€æŸ¥Node.jsç‰ˆæœ¬ï¼š`node -v`
2. æ¸…ç†npmç¼“å­˜ï¼š`npm cache clean --force`
3. åˆ é™¤node_modulesåé‡æ–°å®‰è£…ï¼š`rm -rf node_modules && npm install`

### SSLè¯ä¹¦é—®é¢˜
1. ç¡®è®¤åŸŸåè§£ææ­£ç¡®ï¼š`nslookup your-domain.com`
2. æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦å¼€æ”¾443ç«¯å£
3. æŸ¥çœ‹Certbotæ—¥å¿—ï¼š`sudo tail -f /var/log/letsencrypt/letsencrypt.log`

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

1. **ç³»ç»Ÿè¦æ±‚**ï¼šç¡®ä¿ä½¿ç”¨æ”¯æŒçš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬
2. **æƒé™é—®é¢˜**ï¼šç¡®ä¿ä»¥rootæƒé™æˆ–sudoæƒé™è¿è¡Œè„šæœ¬
3. **ç½‘ç»œé—®é¢˜**ï¼šç¡®ä¿æœåŠ¡å™¨å¯ä»¥è®¿é—®å¤–ç½‘å’ŒGitHub
4. **ç«¯å£å¼€æ”¾**ï¼šç¡®ä¿80å’Œ443ç«¯å£åœ¨é˜²ç«å¢™ä¸­å¼€æ”¾

## ğŸ¯ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **å¯ç”¨Gzipå‹ç¼©**ï¼šå·²åœ¨Nginxé…ç½®ä¸­å¯ç”¨
2. **è®¾ç½®ç¼“å­˜ç­–ç•¥**ï¼šé™æ€èµ„æºç¼“å­˜1å¹´
3. **ä½¿ç”¨CDN**ï¼šè€ƒè™‘ä½¿ç”¨CDNåŠ é€Ÿé™æ€èµ„æº
4. **ç›‘æ§æ€§èƒ½**ï¼šä½¿ç”¨å·¥å…·å¦‚htopç›‘æ§æœåŠ¡å™¨æ€§èƒ½

---

**æ­å–œï¼** ğŸ‰ æ‚¨çš„åŒ…è£…å·¥å…·ç½‘ç«™ç°åœ¨å·²ç»æˆåŠŸéƒ¨ç½²åœ¨VPSä¸Šäº†ï¼